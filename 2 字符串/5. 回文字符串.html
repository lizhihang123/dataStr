<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // 1. 法一：双指针法
        // 这个方法很重要 一定要掌握
        // 两个指针都要移动 而不是一个指针固定，另一个指针去找 这样的方式 => while循环 i++ j--
        // 除了数字 字母 其它不判断，那么判断逻辑就是，如果Unicode编码不在大写字母 小写字母 数字之间 就跳过 
        // 大写字母的Unicode码 97 - 122
        // 大写字母的Unicode编码 65 - 90
        // 数字的Unicode编码 48 - 57 
        
        // ASCLL和Unicode的区别
        // ASCLL编码是一个字节，后者是两个
        // 字母a用ASCLL编码是十进制的65 二进制的01000001；用Unicode就是需要在前面补零 00000000 01000001
        // 方法：s.charCodeAt(i) 返回指定位置的字符的Unicode值
        // https://www.php.cn/faq/483053.html

        // 易错：
        // 前置判断条件 长度为0 或者传入null值
        // i <= j 也没关系
        
        // var isPalindrome = function(s) {
        //     if ( s === null) {
        //         return false
        //     }
        //     s = s.toLowerCase()
        //     console.log(s);
        //     let i = 0,
        //     j = s.length - 1
        //     const isLetterOrDigit = (code) => {
        //         if(
        //             // 大写字母
        //             (code >= 97 && code <= 122  ) || 
        //             // 小写字母
        //             (code >= 65 && code <= 90) || 
        //             // 数字
        //             (code >= 48 && code <= 57) ) {
        //            return true
        //         }
        //         return false
        //     }
        //     while(i <= j) {
        //             if(!isLetterOrDigit(s.charCodeAt(i))) {
        //                 i++
        //             } else if(!isLetterOrDigit(s.charCodeAt(j))) {
        //                 j--
        //             } else if (s[i] === s[j]) {
        //                 console.log(s[i]);
        //                 console.log(s[j]);
        //                 i++
        //                 j--
        //             } else {
        //                 return false
        //             }
        //         }
        //         return true
        //     };
        // console.log(isPalindrome('race a car'));

        // 2. 增添for循环来写 换汤不换药
        // var isPalindrome = function(s) {
        //     if ( s === null) {
        //         return false
        //     }
        //     s = s.toLowerCase()
        //     let n = s.length
        //         const isLetterOrDigit = (code) => {
        //         if(
        //             // 大写字母
        //             (code >= 97 && code <= 122  ) || 
        //             // 小写字母
        //             (code >= 65 && code <= 90) || 
        //             // 数字
        //             (code >= 48 && code <= 57) ) {
        //            return true
        //         }
        //         return false
        //     }
            
        //     for(let i = 0,j = n - 1; i < n, j >= 0; i++, j-- ) {
        //         const codei = s.charCodeAt(i)
        //         const codej = s.charCodeAt(j)
        //         while(i <= j && isLetterOrDigit(codei)) {
        //             i++
        //         } 
        //         while(i <= j && isLetterOrDigit(codej)) {
        //             j--
        //         }
        //         if(s[i] !== s[j]) {
        //             return false
        //         }
        //     }
        //     return true
        // }
        // console.log(isPalindrome('1233,,,21'));

        // 3. 正则表达式优化
        var isPalindrome = function(s) {
            s = s.replace(/[\W|_]/g,'').toLowerCase()
            if( s === null) {
                return false
            }
            let left = 0
            let right = s.length - 1
            while(left < right) {
                if(s[left] !== s[right]) {
                    return false
                }
                left++
                right--
            }
            return true
        }
        console.log(isPalindrome('abcba'))
        console.log(isPalindrome('abc__ba'))
        console.log(isPalindrome(''));
    </script>
</body>
</html>